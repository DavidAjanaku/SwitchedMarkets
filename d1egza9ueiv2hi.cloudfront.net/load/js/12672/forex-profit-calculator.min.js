var options={searchable:true,placeholder:'<span class="text-secondary">Choose instrument</span>'};bind_nice_select("currency-pair-selector",options);document.getElementById("calculator-form").addEventListener("submit",(e=>{e.preventDefault();let t=true;const n=document.getElementById("currency-pair-selector").value.length;const l=document.getElementById("volume-input");const s=document.getElementById("open-price-input");const i=document.getElementById("close-price");const o=document.getElementById("err-symbol");const c=document.getElementById("err-volume");const r=document.getElementById("err-open");const u=document.getElementById("err-close");if(n===0){document.getElementsByClassName("nice-select")[0].classList.add("invalid");o.style.display="block";t=false}if(l.value.length===0||l.value==="0"){document.getElementById("volume-input").classList.add("invalid");c.style.display="block";t=false}if(s.value.length===0||s.value==="0"){document.getElementById("open-price-input").classList.add("invalid");r.style.display="block";t=false}if(i.value.length===0||i.value==="0"){document.getElementById("close-price").classList.add("invalid");u.style.display="block";t=false}if(t){document.getElementsByClassName("nice-select")[0].classList.remove("invalid");o.style.display="none";document.getElementById("volume-input").classList.remove("invalid");c.style.display="none";document.getElementById("open-price-input").classList.remove("invalid");r.style.display="none";document.getElementById("close-price").classList.remove("invalid");u.style.display="none";(new ProfitCalculator).calculate_profit()}}));function set_value(e,t){document.getElementById(e).value=t.innerText;t.parentElement.style.display="none"}function show_dropdown(e,t){let n=e.nextElementSibling.getElementsByClassName("input-drop-down")[0];if(t){n.style.display="block"}else{n.style.display="none"}}function filter_options(e){let t=e.nextElementSibling.getElementsByClassName("input-drop-down")[0].children;let n=e.value.toLowerCase();for(let e=0;e<t.length;e++){if(t[e].value.toLowerCase().includes(n)){t[e].style.display="block"}else{t[e].style.display="none"}}}function ProfitCalculator(){this.instrument=document.getElementById("currency-pair-selector").value;this.deposit_currency=document.getElementById("deposit-currency").value;this.volume=document.getElementById("volume-input").value;this.direction=document.getElementById("direction-select").value;this.open_price=document.getElementById("open-price-input").value;this.close_price=document.getElementById("close-price").value;this.calculate_url="/app/tools/forex-profit-calculator/calculate-profit/";this.calculate_profit=function(){let e=new Modal;e.show_spinning();const t={open_price:this.open_price,close_price:this.close_price,volume:this.volume,deposit_currency:this.deposit_currency,direction:this.direction,currency_pair:this.instrument};sm_func.getJson(this.calculate_url,"POST",t).then((t=>{if(t.result==="success"){e.fill_results(t.data);e.hide_spinning()}else{e.show_error(t.reason);e.hide_spinning()}}))}}function check_input(e,t,n){let l=document.getElementsByClassName("nice-select")[t];let s=e.value;if(n==="number"){s=parseFloat(s)}if(s){l.classList.remove("alert-sign");return s}else{l.classList.add("alert-sign");return 0}}function bind_nice_select(e,t){let n=document.getElementById(e);NiceSelect.bind(n,t);n.value=t.value}function Modal(){this.results_div=document.querySelector("#calculator-form").querySelector(".js-calculation-results-block");this.profit_name_div=this.results_div.querySelector(".js-profit-name");this.profit_number_div=this.results_div.querySelector(".js-profit-number");let e=document.getElementById("loader-holder");this.show_spinning=function(){e.style.zIndex=100};this.hide_spinning=function(){e.style.zIndex=-1};this.fill_results=function(e){this.results_div.style.display="block";this.profit_name_div.innerText=e.profit_or_loss;let t=Math.round(parseFloat(e.profit_amt_in_deposit_currency)*100)/100;t=(new Intl.NumberFormat).format(t);this.profit_number_div.innerText=t+" "+e.deposit_currency}}function increment_value(e){const t=document.getElementById(e);t.value++;t.focus()}function decrement_value(e){const t=document.getElementById(e);if(t.value>0){t.value--}if(t.value<0){t.value=0}t.focus()}
