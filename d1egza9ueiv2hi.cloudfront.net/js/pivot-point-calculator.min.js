function PivotCalculator(t){let e=this;this.list_levels=t;this.form=document.querySelector(".js-pp-form");this.value_cells=document.querySelectorAll(".value-cell");this.input_open=document.querySelector(".js-open");this.input_high=document.querySelector(".js-high");this.input_low=document.querySelector(".js-low");this.input_close=document.querySelector(".js-close");this.form.querySelectorAll("input").forEach((t=>{t.addEventListener("keyup",(()=>{e.clear_results()}))}));this.form.addEventListener("submit",(t=>{t.preventDefault();this.clear_results();this.show_results("woodie",this.calc_woodie);this.show_results("floor",this.calc_floor);this.show_results("demark",this.calc_demark);this.show_results("camarilla",this.calc_camarilla);this.show_results("fibonacci",this.calc_fibonacci)}));this.clear_results=function(){this.value_cells.forEach((t=>{t.innerText="-"}))};this.show_results=function(t,e){let l=e(parseFloat(this.input_open.value),parseFloat(this.input_close.value),parseFloat(this.input_high.value),parseFloat(this.input_low.value));let s=document.querySelector(".js-"+t);this.list_levels.forEach((t=>{let e=s.querySelector(".js-"+t);let i=l[t];if(i){e.innerText=i.toFixed(4)}}))};this.calc_woodie=function(t,e,l,s){let i=(l+s+2*e)/4;let r=2*i-s;let o=i+l-s;let c=2*i-l;let u=i-l+s;return{pp:i,r1:r,r2:o,s1:c,s2:u}};this.calc_floor=function(t,e,l,s){let i=(l+s+e)/3;let r=2*i-s;let o=i+l-s;let c=l+2*(i-s);let u=2*i-l;let n=i-l+s;let a=s-2*(l-i);return{pp:i,r1:r,r2:o,r3:c,s1:u,s2:n,s3:a}};this.calc_camarilla=function(t,e,l,s){let i=(l-s)*1.1/2+e;let r=(l-s)*1.1/4+e;let o=(l-s)*1.1/6+e;let c=(l-s)*1.1/12+e;let u=e-(l-s)*1.1/12;let n=e-(l-s)*1.1/6;let a=e-(l-s)*1.1/4;let h=e-(l-s)*1.1/2;return{r1:c,r2:o,r3:r,r4:i,s1:u,s2:n,s3:a,s4:h}};this.calc_demark=function(t,e,l,s){let i=0;if(e<t){i=l+2*s+e}if(e>t){i=2*l+s+e}if(e==t){i=l+s+2*e}let r=i/2-s;let o=i/2-l;return{r1:r,s1:o}};this.calc_fibonacci=function(t,e,l,s){let i=(l+s+e)/3;let r=i+(l-s)*1;let o=i+(l-s)*.618;let c=i+(l-s)*.382;let u=i-(l-s)*.382;let n=i-(l-s)*.618;let a=i-(l-s)*1;return{pp:i,r1:c,r2:o,r3:r,s1:u,s2:n,s3:a}}}
